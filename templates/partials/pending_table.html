<!-- Pending Files Table -->
<div class="p-4 border-b border-gray-800 flex items-center justify-between">
    <div class="flex items-center gap-4">
        <h3 class="font-semibold text-gray-200">Pending Files</h3>
        <span class="text-sm text-gray-500">{{ total }} total</span>
    </div>

    {% if files %}
    <div class="flex items-center gap-3">
        <button hx-post="/files/approve/all" hx-swap="none" hx-confirm="Approve all {{ total }} pending files?"
            class="px-4 py-2 rounded-lg bg-green-500/20 text-green-400 hover:bg-green-500/30 text-sm font-medium transition-colors">
            ✓ Approve All
        </button>
    </div>
    {% endif %}
</div>

{% if files %}
<div class="overflow-x-auto">
    <table class="w-full">
        <thead class="bg-dark-700 text-gray-400 text-sm">
            <tr>
                <th class="px-4 py-3 text-left w-10">
                    <input type="checkbox" id="select-all-pending"
                        class="rounded border-gray-600 bg-dark-700 text-indigo-500">
                </th>
                <th class="px-4 py-3 text-left">File</th>
                <th class="px-4 py-3 text-left">Size</th>
                <th class="px-4 py-3 text-left">Type</th>
                <th class="px-4 py-3 text-left">Status</th>
                <th class="px-4 py-3 text-left">Action</th>
            </tr>
        </thead>
        <tbody id="pending-tbody" class="divide-y divide-gray-800">
            {% for file in files %}
            {% include "partials/file_row.html" %}
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Pagination -->
{% if total_pages > 1 %}
<div class="p-4 border-t border-gray-800 flex items-center justify-between">
    <div class="text-sm text-gray-500">
        Page {{ page }} of {{ total_pages }}
    </div>
    <div class="flex gap-2">
        {% if has_prev %}
        <button hx-get="/pending?page={{ page - 1 }}" hx-target="#content-pending" hx-swap="innerHTML"
            class="px-3 py-1 rounded-lg bg-dark-600 text-gray-300 hover:bg-dark-500 text-sm">
            ← Previous
        </button>
        {% endif %}
        {% if has_next %}
        <button hx-get="/pending?page={{ page + 1 }}" hx-target="#content-pending" hx-swap="innerHTML"
            class="px-3 py-1 rounded-lg bg-dark-600 text-gray-300 hover:bg-dark-500 text-sm">
            Next →
        </button>
        {% endif %}
    </div>
</div>
{% endif %}

{% else %}
<div class="p-12 text-center">
    <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gray-800 flex items-center justify-center">
        <svg class="w-8 h-8 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4">
            </path>
        </svg>
    </div>
    <p class="text-gray-500">No pending files</p>
    <p class="text-sm text-gray-600 mt-1">Add a channel to start scanning for files</p>
</div>
{% endif %}

<script>
    // Select all checkbox functionality
    document.getElementById('select-all-pending')?.addEventListener('change', function () {
        document.querySelectorAll('#pending-tbody input[type="checkbox"]').forEach(cb => {
            cb.checked = this.checked;
        });
    });
</script>