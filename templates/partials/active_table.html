<!-- Active Downloads Table Partial -->
{% if files %}
<div class="overflow-x-auto">
    <table class="w-full">
        <thead>
            <tr class="text-left text-sm text-gray-400 border-b border-gray-800">
                <th class="pb-3">Type</th>
                <th class="pb-3">Name</th>
                <th class="pb-3">Category</th>
                <th class="pb-3">Status</th>
                <th class="pb-3">Updated</th>
            </tr>
        </thead>
        <tbody class="text-sm">
            {% for file in files %}
            <tr class="border-b border-gray-800/50" hx-get="/files/{{ file.id }}/status" hx-trigger="every 3s"
                hx-swap="outerHTML">
                <!-- Type -->
                <td class="py-3">
                    {% if file.file_type == 'audio' %}
                    <span class="px-2 py-1 rounded bg-purple-500/20 text-purple-400 text-xs">üéµ</span>
                    {% else %}
                    <span class="px-2 py-1 rounded bg-red-500/20 text-red-400 text-xs">üìÑ</span>
                    {% endif %}
                </td>

                <!-- Name -->
                <td class="py-3">
                    <div class="max-w-xs truncate text-white">{{ file.file_name }}</div>
                </td>

                <!-- Category -->
                <td class="py-3 text-gray-400 text-xs">
                    {{ file.destination_category or '--' }}
                </td>

                <!-- Status -->
                <td class="py-3">
                    {% if file.status == 'QUEUED' %}
                    <span class="px-3 py-1 rounded bg-blue-500/20 text-blue-400 text-xs">
                        ‚è≥ Queued
                    </span>
                    {% elif file.status == 'DOWNLOADING' %}
                    <span class="px-3 py-1 rounded bg-cyan-500/20 text-cyan-400 text-xs animate-pulse">
                        ‚¨áÔ∏è Downloading
                    </span>
                    {% elif file.status == 'UPLOADING' %}
                    <span class="px-3 py-1 rounded bg-amber-500/20 text-amber-400 text-xs animate-pulse">
                        ‚¨ÜÔ∏è Uploading
                    </span>
                    {% endif %}
                </td>

                <!-- Updated -->
                <td class="py-3 text-gray-400 text-xs">
                    {% if file.updated_at %}
                    {{ file.updated_at.strftime('%H:%M:%S') }}
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="text-center py-12">
    <div class="text-4xl mb-3">üò¥</div>
    <p class="text-gray-400">No active downloads</p>
    <p class="text-sm text-gray-500 mt-1">Approve some pending files to start downloading</p>
</div>
{% endif %}